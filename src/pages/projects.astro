---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Link from "@/components/Link.astro";
import PageHead from "@/components/PageHead.astro";
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import { Icon } from "astro-icon/components";

const projects = await getCollection("projects");
---

<Layout class="max-w-3xl">
  <PageHead
    slot="head"
    title="Projects"
    description="Open source projects and side projects"
  />
  <Breadcrumbs items={[{ label: "Projects", icon: "lucide:folder-open" }]} />
  <section class="space-y-6">
    <p class="text-muted-foreground">
      A collection of open source projects and experiments I've worked on.
    </p>

    <ul class="space-y-4">
      {
        projects.map((project) => (
          <li class="group rounded-xl border p-4 transition-colors duration-300 ease-in-out hover:bg-muted/50">
            <Link href={project.data.link} class="block" external>
              <div class="flex items-start justify-between gap-4">
                <div class="grow">
                  <h3 class="mb-1 text-lg font-medium group-hover:text-primary transition-colors">
                    {project.data.name}
                  </h3>
                  <p class="text-muted-foreground mb-3 text-sm">
                    {project.data.description}
                  </p>
                  <div class="flex flex-wrap gap-2">
                    {project.data.tags.map((tag: string) => (
                      <span class="bg-muted text-muted-foreground rounded-md px-2 py-1 text-xs">
                        {tag}
                      </span>
                    ))}
                  </div>
                </div>
                <Icon
                  name="lucide:external-link"
                  class="size-4 text-muted-foreground shrink-0 mt-1"
                />
              </div>
            </Link>
          </li>
        ))
      }
    </ul>
  </section>
</Layout>
