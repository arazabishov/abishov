---
import Button from "@/components/ui/Button.astro";
import { Icon } from "astro-icon/components";

interface Props {
  currentPage: number;
  totalPages: number;
  baseUrl: string;
}

const { currentPage, totalPages, baseUrl } = Astro.props;

const pages = Array.from({ length: totalPages }, (_, i) => i + 1);

function getPageUrl(page: number): string {
  if (page === 1) {
    return baseUrl;
  }

  return `${baseUrl}${page}`;
}
---

<nav role="navigation" aria-label="pagination" class="mx-auto flex w-full justify-center">
  <ul class="flex flex-row flex-wrap items-center gap-1">
    <li>
      <Button
        href={currentPage > 1 ? getPageUrl(currentPage - 1) : undefined}
        variant="ghost"
        size="nav"
        aria-label="Go to previous page"
        class:list={[currentPage === 1 && "pointer-events-none opacity-50"]}
      >
        <Icon name="lucide:chevron-left" class="size-4" />
        <span class="hidden sm:block">Previous</span>
      </Button>
    </li>

    {
      pages.map((page) => (
        <li>
          <Button
            href={getPageUrl(page)}
            aria-current={page === currentPage ? "page" : undefined}
            variant={page === currentPage ? "outline" : "ghost"}
            size="icon"
          >
            {page}
          </Button>
        </li>
      ))
    }

    <li>
      <Button
        href={currentPage < totalPages ? getPageUrl(currentPage + 1) : undefined}
        variant="ghost"
        size="nav"
        aria-label="Go to next page"
        class:list={[currentPage === totalPages && "pointer-events-none opacity-50"]}
      >
        <span class="hidden sm:block">Next</span>
        <Icon name="lucide:chevron-right" class="size-4" />
      </Button>
    </li>
  </ul>
</nav>
